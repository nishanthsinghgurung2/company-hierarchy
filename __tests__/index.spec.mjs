import { traverseAndPrintCompanyInfo, expandCompany } from "../index.mjs";

describe('traverseAndPrintCompanyInfo', () => {
    it('should get the varies levels of companyInfo and right level count for valid companyId', () => {
        const { levelOfCompanies, levelCount } = traverseAndPrintCompanyInfo('CR463634467464');
        const expectedLevelOfCompanies = [ { companyId: 'CR463634467464',
        companyName: 'Gree chonebr & Co',
        parentCompanyId: 'CR171511710883',
        level: 0 },
      { companyId: 'C324658304029',
        companyName: 'Gree London & Co Ltd',
        parentCompanyId: 'CR171511710883',
        level: 1 },
      { companyId: 'C578883889588',
        companyName: 'Gree Associated Group Limited',
        parentCompanyId: 'CR171511710883',
        level: 1 },
      { companyId: 'CR223836514978',
        companyName: 'seastr group',
        parentCompanyId: 'CR171511710883',
        level: 1 },
      { companyId: 'CR394136136227',
        companyName: 'gree midlands',
        parentCompanyId: 'CR171511710883',
        level: 1 },
      { companyId: 'CR431468284100',
        companyName: 'seaglone ltd',
        parentCompanyId: 'CR171511710883',
        level: 1 },
      { companyId: 'CR463634467464',
        companyName: 'Gree chonebr & Co',
        parentCompanyId: 'CR171511710883',
        level: 1 },
      { companyId: 'CR695058321580',
        companyName: 'gree london uk limited',
        parentCompanyId: 'CR171511710883',
        level: 1 },
      { companyId: 'CR801677267342',
        companyName: 'Gree Liverpool UK Ltd',
        parentCompanyId: 'CR171511710883',
        level: 1 },
      { companyId: 'CR836794591392',
        companyName: 'Gree New',
        parentCompanyId: 'CR171511710883',
        level: 1 },
      { companyId: 'R717615300617',
        companyName: 'gree london limited',
        parentCompanyId: 'CR171511710883',
        level: 1 },
      { companyId: 'R979129742903',
        companyName: 'Gree Midlands',
        parentCompanyId: 'CR171511710883',
        level: 1 },
      { companyId: 'S6957298694',
        companyName: 'Chunisane & Co Limited',
        parentCompanyId: 'CR171511710883',
        level: 1 },
      { companyId: 'S897130166622',
        companyName: 'BRALLISTRANE INTERNATIONAL LTD',
        parentCompanyId: 'CR171511710883',
        level: 1 },
      { companyId: 'CR171511710883',
        companyName: 'Gree Wales International',
        parentCompanyId: 'C741715510888',
        level: 2 },
      { companyId: 'CR811166384274',
        companyName: 'Gree Liverpool International',
        parentCompanyId: 'C741715510888',
        level: 2 },
      { companyId: 'S23907549916',
        companyName: 'gree london limited',
        parentCompanyId: 'C741715510888',
        level: 2 },
      { companyId: 'S637917689179',
        companyName: 'reseasite & co',
        parentCompanyId: 'C741715510888',
        level: 2 },
      { companyId: 'C453741218205',
        companyName: 'Gree Old International',
        parentCompanyId: 'C299430551318',
        level: 3 },
      { companyId: 'C48773310779',
        companyName: 'Gree Coventry Properties',
        parentCompanyId: 'C299430551318',
        level: 3 },
      { companyId: 'C741715510888',
        companyName: 'gree new uk ltd',
        parentCompanyId: 'C299430551318',
        level: 3 },
      { companyId: 'CR260574629460',
        companyName: 'gree ii international limited',
        parentCompanyId: 'C299430551318',
        level: 3 },
      { companyId: 'CR334147381489',
        companyName: 'Tanuni',
        parentCompanyId: 'C299430551318',
        level: 3 },
      { companyId: 'CR890024932013',
        companyName: 'STRORACHEE GROUP PLC',
        parentCompanyId: 'C299430551318',
        level: 3 },
      { companyId: 'R46763671953',
        companyName: 'Gree B Plc',
        parentCompanyId: 'C299430551318',
        level: 3 },
      { companyId: 'R51298988401',
        companyName: 'gree coventry land limited',
        parentCompanyId: 'C299430551318',
        level: 3 },
      { companyId: 'R59414441376',
        companyName: 'Gree Liverpool Properties',
        parentCompanyId: 'C299430551318',
        level: 3 },
      { companyId: 'R621465293483',
        companyName: 'GREE WALES LIMITED',
        parentCompanyId: 'C299430551318',
        level: 3 },
      { companyId: 'S132625882204',
        companyName: 'gree b group ltd',
        parentCompanyId: 'C299430551318',
        level: 3 },
      { companyId: 'S160351432609',
        companyName: 'Gree resanegree Ltd',
        parentCompanyId: 'C299430551318',
        level: 3 },
      { companyId: 'S237811870099',
        companyName: 'lesalligl uk ltd',
        parentCompanyId: 'C299430551318',
        level: 3 },
      { companyId: 'S534751501294',
        companyName: 'Gree Midlands Properties',
        parentCompanyId: 'C299430551318',
        level: 3 },
      { companyId: 'C299430551318',
        companyName: 'SONESONE GREE GROUP PLC',
        parentCompanyId: 'S245740598444',
        level: 4 },
      { companyId: 'C900123319860',
        companyName: 'sonesone associated international plc',
        parentCompanyId: 'S245740598444',
        level: 4 },
      { companyId: 'CR210121479686',
        companyName: 'Sonesone Liverpool Group Limited',
        parentCompanyId: 'S245740598444',
        level: 4 },
      { companyId: 'CR623134981494',
        companyName: 'SONESONE TANONECHORA LIMITED',
        parentCompanyId: 'S245740598444',
        level: 4 },
      { companyId: 'S224271107690',
        companyName: 'sonesone coventry uk',
        parentCompanyId: 'S245740598444',
        level: 4 },
      { companyId: 'C17278382104',
        companyName: 'Breeglone II International',
        parentCompanyId: 'C336308768838',
        level: 5 },
      { companyId: 'C991533652097',
        companyName: 'Breeglone II Plc',
        parentCompanyId: 'C336308768838',
        level: 5 },
      { companyId: 'CR514412296020',
        companyName: 'Breeglone Old Plc',
        parentCompanyId: 'C336308768838',
        level: 5 },
      { companyId: 'CR682333932230',
        companyName: 'Breeglone Old International Plc',
        parentCompanyId: 'C336308768838',
        level: 5 },
      { companyId: 'CR834916132256',
        companyName: 'BREEGLONE ASSOCIATED PROPERTIES',
        parentCompanyId: 'C336308768838',
        level: 5 },
      { companyId: 'R490157523099',
        companyName: 'Breeglone London Limited',
        parentCompanyId: 'C336308768838',
        level: 5 },
      { companyId: 'R493184553544',
        companyName: 'Breeglone Liverpool Group Ltd',
        parentCompanyId: 'C336308768838',
        level: 5 },
      { companyId: 'R660276432206',
        companyName: 'Breeglone B UK',
        parentCompanyId: 'C336308768838',
        level: 5 },
      { companyId: 'R792713123005',
        companyName: 'Breeglone B UK Limited',
        parentCompanyId: 'C336308768838',
        level: 5 },
      { companyId: 'S245740598444',
        companyName: 'Sonesone & Co Ltd',
        parentCompanyId: 'C336308768838',
        level: 5 },
      { companyId: 'S692626961048',
        companyName: 'breeglone b land limited',
        parentCompanyId: 'C336308768838',
        level: 5 },
      { companyId: 'C336308768838',
        companyName: 'Breeglone UK Limited',
        parentCompanyId: '',
        level: 6 } ];

        expect(levelCount).toEqual(6);
        expect(expectedLevelOfCompanies).toEqual(levelOfCompanies);
    });

    it('should return null for invalid string companyId', () => {
      const result = traverseAndPrintCompanyInfo('blah');
      expect(result).toEqual(null);
    });

    it('should return null for invalid non string companyId', () => {
      const result = traverseAndPrintCompanyInfo(1234);
      expect(result).toEqual(null);
    });
})

describe('expandCompany', () => {
  it('should get the list of children for valid companyId', () => {
      const childrenCompanies = expandCompany('CR463634467464');
      const expectedLevelOfCompanies = [ { companyId: 'C317789571426',
      companyName: 'Chonebr London Plc',
      parentCompanyId: 'CR463634467464' },
    { companyId: 'C338310109128',
      companyName: 'Chonebr struni UK Plc',
      parentCompanyId: 'CR463634467464' },
    { companyId: 'C667366391172',
      companyName: 'SEAGL LTD',
      parentCompanyId: 'CR463634467464' },
    { companyId: 'C906390379905',
      companyName: 'Chonebr Coventry International Limited',
      parentCompanyId: 'CR463634467464' },
    { companyId: 'CR450721552950',
      companyName: 'Resorabr Properties Plc',
      parentCompanyId: 'CR463634467464' },
    { companyId: 'R295478144903',
      companyName: 'Chonebr Liverpool International Limited',
      parentCompanyId: 'CR463634467464' },
    { companyId: 'S703315849011',
      companyName: 'CHONEBR LONDON INTERNATIONAL',
      parentCompanyId: 'CR463634467464' } ];

      expect(expectedLevelOfCompanies).toEqual(childrenCompanies);
  });

  it('should return null for non string companyId', () => {
    const result = expandCompany(1234);
    expect(result).toEqual(null);
  });

  it('should return empty array if the passed string companyId is not found', () => {
    const result = expandCompany("1234");
    expect(result).toEqual([]);
  });
})